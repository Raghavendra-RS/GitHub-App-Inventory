name: GitHub Ruleset Cleanup

on:
  workflow_dispatch:
  schedule:
    - cron: "0 2 1 * *"   # Runs monthly on the 1st at 02:00 UTC

jobs:
  cleanup:
    runs-on: ubuntu-latest

    steps:
      - name: Run GitHub Ruleset Cleanup
        uses: your-org/github-ruleset-cleanup@v1.0.0
        with:
          github_token: ${{ secrets.ORG_ADMIN_TOKEN }}
          org_name: yubi-migration
          output_filename: removed_rulesets.csv

      - name: Upload Cleanup Report
        uses: actions/upload-artifact@v4
        with:
          name: github-ruleset-cleanup-report
          path: removed_rulesets.csv
